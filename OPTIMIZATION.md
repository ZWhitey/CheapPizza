# 優惠碼搜尋優化分析

## 摘要

基於 853 個已收集的有效優惠碼分析，優化了搜尋範圍，將掃描代碼數量從 5000 減少到 1800，**減少 64% 的掃描時間**。

## 分析結果

### 15xxx 系列
- **有效優惠碼數量**: 500
- **範圍**: 15002 - 15822
- **密度**: 60.90%
- **高密度區段 (前5)**:
  - 15700-15799: 99 個優惠碼
  - 15600-15699: 84 個優惠碼
  - 15400-15499: 82 個優惠碼
  - 15500-15599: 82 個優惠碼
  - 15300-15399: 55 個優惠碼

**優化建議**: 掃描 15000-15899 (9個百位區段)

### 25xxx 系列
- **有效優惠碼數量**: 47
- **範圍**: 25313 - 25994
- **密度**: 6.89%
- **高密度區段**:
  - 25900-25999: 22 個優惠碼
  - 25300-25399: 7 個優惠碼
  - 25700-25799: 7 個優惠碼
  - 25400-25499: 5 個優惠碼
  - 25500-25599: 5 個優惠碼

**優化建議**: 僅掃描有 5+ 優惠碼的區段 (5個百位區段)

### 26xxx 系列
- **有效優惠碼數量**: 300
- **範圍**: 26300 - 26692
- **密度**: 76.34%
- **高密度區段**:
  - 26300-26399: 93 個優惠碼
  - 26500-26599: 86 個優惠碼
  - 26600-26699: 70 個優惠碼
  - 26400-26499: 51 個優惠碼

**優化建議**: 掃描 26300-26699 (4個百位區段)

### 14xxx 系列
- **有效優惠碼數量**: 0
- **結果**: 移除此範圍

### 94xxx 系列
- **有效優惠碼數量**: 6
- **範圍**: 94103 - 94700
- **密度**: 1.00%
- **結果**: 密度太低，移除此範圍

## 優化後的掃描範圍

```typescript
const DEFAULT_RANGES = [
  '15000-15099', '15100-15199', '15200-15299', '15300-15399', 
  '15400-15499', '15500-15599', '15600-15699', '15700-15799', '15800-15899',
  '25300-25399', '25400-25499', '25500-25599', '25700-25799', '25900-25999',
  '26300-26399', '26400-26499', '26500-26599', '26600-26699'
];
```

## 效能提升

- **原始掃描範圍**: 5000 個代碼 (14000-14999, 15000-15999, 25000-25999, 26000-26999, 94000-94999)
- **優化後掃描範圍**: 1800 個代碼 (18個百位區段)
- **減少**: 64.0%
- **預估時間節省**: 13.3 分鐘 (基於每個代碼 250ms 的延遲設定，見 crawler.ts:273)

> **注意**: 實際時間節省取決於網路條件和 API 回應時間。250ms 的延遲是在爬蟲中設定的請求間隔。

## 優化策略

1. **移除無效範圍**: 14xxx 和 94xxx 幾乎沒有有效優惠碼
2. **聚焦高密度區段**: 只掃描每百個代碼中有 5 個以上有效優惠碼的區段
3. **保持覆蓋率**: 仍然覆蓋了 99% 以上的有效優惠碼

## 未來建議

1. 定期重新分析優惠碼分佈，調整搜尋範圍
2. 考慮使用機器學習預測新的優惠碼範圍
3. 監控新發現的優惠碼，如果出現在優化範圍外，考慮擴展範圍

## 如何使用

優化後的範圍已自動套用在 `crawler.ts` 的 `DEFAULT_RANGES` 常數中。執行爬蟲時無需額外設定：

```bash
npx tsx crawler.ts
```

如需手動指定範圍：

```bash
npx tsx crawler.ts 15000-15999 26300-26699
```
